# Build rules for the OpenAFS rxgk test suite.

srcdir=@srcdir@
abs_top_builddir=@abs_top_builddir@
include @TOP_OBJDIR@/src/config/Makefile.config
include @TOP_OBJDIR@/src/config/Makefile.pthread

MODULE_CFLAGS = -I$(TOP_OBJDIR) -I$(srcdir)/../common/

LIBS = $(abs_top_builddir)/tests/common/libafstest_common.la \
       $(abs_top_builddir)/src/rx/liboafs_rx.la \
       $(abs_top_builddir)/src/rxgk/liboafs_rxgk.la

tests = combine-t conv-t derive-t krb5gss-t

all check test tests: $(tests)

combine-t: combine-t.o $(LIBS)
	$(LT_LDRULE_static) combine-t.o $(LIBS) $(LIB_roken) $(XLIBS)

conv-t: conv-t.o $(LIBS)
	$(LT_LDRULE_static) conv-t.o $(LIBS) $(LIB_roken) $(XLIBS)

derive-t: derive-t.o $(LIBS)
	$(LT_LDRULE_static) derive-t.o $(LIBS) $(LIB_roken) $(XLIBS)

krb5gss-t: krb5gss-t.o $(LIBS)
	$(LT_LDRULE_static) krb5gss-t.o $(LIBS) $(LIB_roken) $(XLIBS)

install:

clean distclean:
	$(LT_CLEAN)
	$(RM) -f $(tests) *.o core
